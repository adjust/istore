BEGIN;
-- persistence should persist countries;
-- ./spec/persistence_spec.rb:8;
CREATE EXTENSION istore;
ERROR:  type "istore" already exists
CREATE TABLE country_test AS SELECT 'de'::country, 1 as num;
ERROR:  current transaction is aborted, commands ignored until end of transaction block
SELECT * FROM country_test;
ERROR:  current transaction is aborted, commands ignored until end of transaction block
UPDATE country_test SET num = 2;
ERROR:  current transaction is aborted, commands ignored until end of transaction block
SELECT * FROM country_test;
ERROR:  current transaction is aborted, commands ignored until end of transaction block
ROLLBACK;
BEGIN;
-- persistence should persist os_names;
-- ./spec/persistence_spec.rb:15;
CREATE EXTENSION istore;
ERROR:  type "istore" already exists
CREATE TABLE os_name_test AS SELECT 'ios'::os_name, 1 as num;
ERROR:  current transaction is aborted, commands ignored until end of transaction block
SELECT * FROM os_name_test;
ERROR:  current transaction is aborted, commands ignored until end of transaction block
UPDATE os_name_test SET num = 2;
ERROR:  current transaction is aborted, commands ignored until end of transaction block
SELECT * FROM os_name_test;
ERROR:  current transaction is aborted, commands ignored until end of transaction block
ROLLBACK;
BEGIN;
-- persistence should persist device_type;
-- ./spec/persistence_spec.rb:22;
CREATE EXTENSION istore;
ERROR:  type "istore" already exists
CREATE TABLE device_type_test AS SELECT 'phone'::device_type, 1 as num;
ERROR:  current transaction is aborted, commands ignored until end of transaction block
SELECT * FROM device_type_test;
ERROR:  current transaction is aborted, commands ignored until end of transaction block
UPDATE device_type_test SET num = 2;
ERROR:  current transaction is aborted, commands ignored until end of transaction block
SELECT * FROM device_type_test;
ERROR:  current transaction is aborted, commands ignored until end of transaction block
ROLLBACK;
